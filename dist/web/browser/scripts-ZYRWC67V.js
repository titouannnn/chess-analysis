/*!
 * Stockfish.js 17 (c) 2025, Chess.com, LLC
 * https://github.com/nmrugg/stockfish.js
 * License: GPLv3
 *
 * Based on Stockfish (c) T. Romstad, M. Costalba, J. Kiiski, G. Linscott and other contributors.
 * https://github.com/official-stockfish/Stockfish
 */var enginePartsCount=6;(function(){var G,R,ge,$,Z,b,B;function N(){function p(x){function c(){return A.buffer!=C&&V(A.buffer),He}function k(){return A.buffer!=C&&V(A.buffer),Ne}function u(){return A.buffer!=C&&V(A.buffer),Ve}function f(){return A.buffer!=C&&V(A.buffer),Ge}x=x||{},(r=r||(x!==void 0?x:{})).ready=new Promise(function(e,t){q=e,E=t}),typeof global<"u"&&Object.prototype.toString.call(global.process)==="[object process]"&&typeof fetch<"u"&&(typeof XMLHttpRequest>"u"&&(global.XMLHttpRequest=function(){var e,t={open:function(n,o){e=o},send:function(){require("fs").readFile(e,function(n,o){t.readyState=4,n?(console.error(n),t.status=404,t.onerror(n)):(t.status=200,t.response=o,t.onreadystatechange(),t.onload())})}};return t}),fetch=null),r.print=function(e){r.listener?r.listener(e):console.log(e)},r.printErr=function(e){r.listener?r.listener(e):console.error(e)},r.terminate=function(){l!==void 0&&l.ra()};var r,q,E,_e,ee,te,ye,we,jt=Object.assign({},r),ve=[],ne="./this.program",re=(e,t)=>{throw t},be=typeof window=="object",L=typeof importScripts=="function",W=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",y=r.ENVIRONMENT_IS_PTHREAD||!1,T="";function Pe(e){return r.locateFile?r.locateFile(e,T):T+e}if(W){T=L?require("path").dirname(T)+"/":__dirname+"/",we=()=>{ye||(te=require("fs"),ye=require("path"))},_e=function(t,n){return we(),t=ye.normalize(t),te.readFileSync(t,n?void 0:"utf8")},ee=t=>t=(t=_e(t,!0)).buffer?t:new Uint8Array(t),1<process.argv.length&&(ne=process.argv[1].replace(/\\/g,"/")),ve=process.argv.slice(2),process.on("uncaughtException",function(t){if(!(t instanceof K))throw t}),process.on("unhandledRejection",function(t){throw t}),re=(t,n)=>{if(ie())throw process.exitCode=t,n;n instanceof K||D("exiting due to exception: "+n),process.exit(t)},r.inspect=function(){return"[Emscripten Module object]"};let e;try{e=require("worker_threads")}catch(t){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),t}global.Worker=e.Worker}else(be||L)&&(L?T=self.location.href:typeof document<"u"&&document.currentScript&&(T=document.currentScript.src),T=(T=h||T).indexOf("blob:")!==0?T.substr(0,T.replace(/[?#].*/,"").lastIndexOf("/")+1):"",W||(_e=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},L&&(ee=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)})));W&&typeof performance>"u"&&(global.performance=require("perf_hooks").performance);var xe,X,ae=console.log.bind(console),We=console.warn.bind(console),Be=(W&&(we(),ae=e=>te.writeSync(1,e+`
`),We=e=>te.writeSync(2,e+`
`)),r.print||ae),D=r.printErr||We,Le=(Object.assign(r,jt),r.arguments&&(ve=r.arguments),r.thisProgram&&(ne=r.thisProgram),r.quit&&(re=r.quit),r.wasmBinary&&(X=r.wasmBinary),r.noExitRuntime||!0);typeof WebAssembly!="object"&&se("no native wasm support detected");var A,Ue,Se=!1;function Ye(e){var t=new TextDecoder(e);this.decode=n=>(n.buffer instanceof SharedArrayBuffer&&(n=new Uint8Array(n)),t.decode.call(t,n))}var C,He,Ne,Ve,Ge,$e=typeof TextDecoder<"u"?new Ye("utf8"):void 0;function Xe(e,t,n){var o=t+n;for(n=t;e[n]&&!(o<=n);)++n;if(16<n-t&&e.subarray&&$e)return $e.decode(e.subarray(t,n));for(o="";t<n;){var s,i,m=e[t++];128&m?(s=63&e[t++],(224&m)==192?o+=String.fromCharCode((31&m)<<6|s):(i=63&e[t++],(m=(240&m)==224?(15&m)<<12|s<<6|i:(7&m)<<18|s<<12|i<<6|63&e[t++])<65536?o+=String.fromCharCode(m):(m-=65536,o+=String.fromCharCode(55296|m>>10,56320|1023&m)))):o+=String.fromCharCode(m)}return o}function z(e){return e?Xe(k(),e,void 0):""}function oe(e,t,n,o){if(0<o){o=n+o-1;for(var s=0;s<e.length;++s){var i=e.charCodeAt(s);if((i=55296<=i&&i<=57343?65536+((1023&i)<<10)|1023&e.charCodeAt(++s):i)<=127){if(o<=n)break;t[n++]=i}else{if(i<=2047){if(o<=n+1)break;t[n++]=192|i>>6}else{if(i<=65535){if(o<=n+2)break;t[n++]=224|i>>12}else{if(o<=n+3)break;t[n++]=240|i>>18,t[n++]=128|i>>12&63}t[n++]=128|i>>6&63}t[n++]=128|63&i}}t[n]=0}}function Me(e){for(var t=0,n=0;n<e.length;++n){var o=e.charCodeAt(n);(o=55296<=o&&o<=57343?65536+((1023&o)<<10)|1023&e.charCodeAt(++n):o)<=127?++t:t=o<=2047?t+2:o<=65535?t+3:t+4}return t}function ze(e){var t=Me(e)+1,n=Y(t);return oe(e,c(),n,t),n}function Qe(e,t){c().set(e,t)}function V(e){C=e,r.HEAP8=He=new Int8Array(e),r.HEAP16=new Int16Array(e),r.HEAP32=Ve=new Int32Array(e),r.HEAPU8=Ne=new Uint8Array(e),r.HEAPU16=new Uint16Array(e),r.HEAPU32=new Uint32Array(e),r.HEAPF32=new Float32Array(e),r.HEAPF64=Ge=new Float64Array(e)}if(typeof TextDecoder<"u"&&new Ye("utf-16le"),y&&(C=r.buffer),ae=r.INITIAL_MEMORY||134217728,y)A=r.wasmMemory,C=r.buffer;else if(r.wasmMemory)A=r.wasmMemory;else if(!((A=new WebAssembly.Memory({initial:ae/65536,maximum:32768,shared:!0})).buffer instanceof SharedArrayBuffer))throw D("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),W&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");(C=A?A.buffer:C).byteLength,V(C);var Je,Ke=[],Ae=[],qt=[],Ze=[],Ft=0;function ie(){return Le||0<Ft}var P,U=0,ke=null,Q=null;function se(e){throw y?postMessage({cmd:"onAbort",arg:e}):r.onAbort&&r.onAbort(e),D(e="Aborted("+e+")"),Se=!0,e=new WebAssembly.RuntimeError(e+". Build with -s ASSERTIONS=1 for more info."),E(e),e}function et(){return P.startsWith("data:application/octet-stream;base64,")}function tt(){var e=P;try{if(e==P&&X)return new Uint8Array(X);if(ee)return ee(e);throw"both async and sync fetching of the wasm failed"}catch(t){se(t)}}r.preloadedImages={},r.preloadedAudios={},P="stockfish.wasm",et()||(P=Pe(P));var Pt={};function J(e){for(;0<e.length;){var t,n=e.shift();typeof n=="function"?n(r):typeof(t=n.Ua)=="number"?n.fa===void 0?Ee(t)():Ee(t)(n.fa):t(n.fa===void 0?null:n.fa)}}function nt(e){var t=qe();return e=e(),he(t),e}function rt(e){var t=l.aa[e];t&&(u()[e>>2]=0,l.wa(t.worker))}var l={ba:[],ha:[],ma:[],Ca:function(){y&&l.Ea()},Xa:function(){},Ea:function(){l.receiveObjectTransfer=l.Ha,l.threadInit=l.xa,l.setExitStatus=l.Ja,Le=!1},aa:{},Ja:function(){},ra:function(){for(var e in l.aa){var t=l.aa[e];t&&t.worker&&l.wa(t.worker)}for(e=0;e<l.ba.length;++e)l.ba[e].terminate();l.ba=[]},wa:function(e){l.Ia(function(){delete l.aa[e.da.sa],l.ba.push(e),l.ha.splice(l.ha.indexOf(e),1),Ce(e.da.sa),e.da=void 0})},Ia:function(e){u()[It>>2]=0;try{e()}finally{u()[It>>2]=1}},Ha:function(){},xa:function(){for(var e in l.ma)l.ma.hasOwnProperty(e)&&l.ma[e]()},Fa:function(e,t){e.onmessage=n=>{var o,s=(n=n.data).cmd;e.da&&(l.za=e.da.sa),n.targetThread&&n.targetThread!=pe()?(o=l.aa[n.bb])?o.worker.postMessage(n,n.transferList):D('Internal error! Worker sent a message "'+s+'" to target pthread '+n.targetThread+", but that thread no longer exists!"):s==="processQueuedMainThreadWork"?At():s==="spawnThread"?ot(n):s==="cleanupThread"?rt(n.thread):s==="killThread"?(n=n.thread,u()[n>>2]=0,s=l.aa[n],delete l.aa[n],s.worker.terminate(),Ce(n),l.ha.splice(l.ha.indexOf(s.worker),1),s.worker.da=void 0):s==="cancelThread"?l.aa[n.thread].worker.postMessage({cmd:"cancel"}):s==="loaded"?(e.loaded=!0,t&&t(e),e.ga&&(e.ga(),delete e.ga)):s==="print"?Be("Thread "+n.threadId+": "+n.text):s==="printErr"?D("Thread "+n.threadId+": "+n.text):s==="alert"?alert("Thread "+n.threadId+": "+n.text):n.target==="setimmediate"?e.postMessage(n):s==="onAbort"?r.onAbort&&r.onAbort(n.arg):D("worker sent an unknown command "+s),l.za=void 0},e.onerror=n=>{throw D("worker sent an error! "+n.filename+":"+n.lineno+": "+n.message),n},W&&(e.on("message",function(n){e.onmessage({data:n})}),e.on("error",function(n){e.onerror(n)}),e.on("detachedExit",function(){})),e.postMessage({cmd:"load",urlOrBlob:r.mainScriptUrlOrBlob||h,wasmMemory:A,wasmModule:Ue})},ya:function(){var e=Pe("stockfish.worker.js");l.ba.push(new Worker(e))},Ba:function(){return l.ba.length==0&&(l.ya(),l.Fa(l.ba[0])),l.ba.pop()}};function at(e){if(y)return O(1,0,e);try{Rt(e)}catch(t){t instanceof K||t=="unwind"||re(1,t)}}r.establishStackSpace=function(){var t=pe(),e=u()[t+44>>2],t=u()[t+48>>2];Dt(e,e-t),he(e)};var ue=[];function Ee(e){var t=ue[e];return t||(e>=ue.length&&(ue.length=e+1),ue[e]=t=Je.get(e)),t}function ot(e){var t=l.Ba();if(!t)return 6;l.ha.push(t);var n=l.aa[e.qa]={worker:t,sa:e.qa},o=(t.da=n,{cmd:"run",start_routine:e.Ka,arg:e.fa,threadInfoStruct:e.qa});return t.ga=()=>{o.time=performance.now(),t.postMessage(o,e.Pa)},t.loaded&&(t.ga(),delete t.ga),0}r.invokeEntryPoint=function(e,t){return Ee(e)(t)};var it=W?()=>{var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:y?()=>performance.now()-r.__performance_now_clock_drift:()=>performance.now(),Wt=[null,[],[]],st={};function ut(e,t,n){return y?O(2,1,e,t,n):0}function ct(e,t){if(y)return O(3,1,e,t)}function ft(e,t,n){return y?O(4,1,e,t,n):0}function lt(e,t,n){if(y)return O(5,1,e,t,n)}function O(e,t){var n=arguments.length-2,o=arguments;return nt(function(){for(var s=Y(8*n),i=s>>3,m=0;m<n;m++){var d=o[2+m];f()[i+m]=d}return kt(e,n,s,t)})}var De=[],Bt=[0,typeof document<"u"?document:0,typeof window<"u"?window:0];function Ie(e){return e=2<e?z(e):e,Bt[e]||(typeof document<"u"?document.querySelector(e):void 0)}function dt(e,t,n){var o,s,i,m,d=Ie(e);return d?(d.la&&(u()[d.la>>2]=t,u()[d.la+4>>2]=n),!d.va&&d.Ra?d.la?(d=u()[d.la+8>>2],e=e?z(e):"",o=d,s=e,i=t,m=n,nt(function(){var M,g=Y(12),v=0;s&&(v=Me(s)+1,M=je(v),oe(s,k(),M,v),v=M),u()[g>>2]=v,u()[g+4>>2]=i,u()[g+8>>2]=m,Et(o,657457152,0,v,g)}),1):-4:(e=!1,(d=d.va?d.va:d).ka&&d.ka.ja&&(e=(e=d.ka.ja.getParameter(2978))[0]===0&&e[1]===0&&e[2]===d.width&&e[3]===d.height),d.width=t,d.height=n,e&&d.ka.ja.viewport(0,0,t,n),0)):-4}function mt(e,t,n){return y?O(6,1,e,t,n):dt(e,t,n)}function Lt(e,t){e.ta||(e.ta=e.getContext,e.getContext=function(w,I){return w=="webgl"==(I=e.ta(w,I))instanceof WebGLRenderingContext?I:null});var n,o,s,i=e.getContext("webgl",t);{if(i){if(i=i,t=t,o=je(8),u()[o+4>>2]=pe(),s={Wa:o,attributes:t,version:t.Ga,ja:i},i.canvas&&(i.canvas.ka=s),(t.ua===void 0||t.ua)&&!(i=(i=s)||Ut).Da){i.Da=!0;var m=n=i.ja,d=m.getExtension("ANGLE_instanced_arrays"),M=(d&&(m.vertexAttribDivisor=function(w,I){d.vertexAttribDivisorANGLE(w,I)},m.drawArraysInstanced=function(w,I,j,a){d.drawArraysInstancedANGLE(w,I,j,a)},m.drawElementsInstanced=function(w,I,j,a,_){d.drawElementsInstancedANGLE(w,I,j,a,_)}),n),g=M.getExtension("OES_vertex_array_object"),v=(g&&(M.createVertexArray=function(){return g.createVertexArrayOES()},M.deleteVertexArray=function(w){g.deleteVertexArrayOES(w)},M.bindVertexArray=function(w){g.bindVertexArrayOES(w)},M.isVertexArray=function(w){return g.isVertexArrayOES(w)}),n),F=v.getExtension("WEBGL_draw_buffers");F&&(v.drawBuffers=function(w,I){F.drawBuffersWEBGL(w,I)}),n.Sa=n.getExtension("EXT_disjoint_timer_query"),n.Za=n.getExtension("WEBGL_multi_draw"),(n.getSupportedExtensions()||[]).forEach(function(w){w.includes("lose_context")||w.includes("debug")||n.getExtension(w)})}return o}return 0}}var Ut,Re,Yt=["default","low-power","high-performance"],Oe={};function pt(){if(!Re){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:ne||"./this.program"};for(e in Oe)Oe[e]===void 0?delete t[e]:t[e]=Oe[e];var n=[];for(e in t)n.push(e+"="+t[e]);Re=n}return Re}function ht(e,t){var n;return y?O(7,1,e,t):(n=0,pt().forEach(function(o,s){var i=t+n;for(s=u()[e+4*s>>2]=i,i=0;i<o.length;++i)c()[s++>>0]=o.charCodeAt(i);c()[s>>0]=0,n+=o.length+1}),0)}function gt(e,t){var n,o;return y?O(8,1,e,t):(n=pt(),u()[e>>2]=n.length,o=0,n.forEach(function(s){o+=s.length+1}),u()[t>>2]=o,0)}function _t(e){return y?O(9,1,e):0}function yt(e,t,n,o){return y?O(10,1,e,t,n,o):(e=st.Va(e),t=st.Ta(e,t,n),u()[o>>2]=t,0)}function wt(e,t,n,o,s){if(y)return O(11,1,e,t,n,o,s)}function vt(e,t,n,o){if(y)return O(12,1,e,t,n,o);for(var s=0,i=0;i<n;i++){var m=u()[t>>2],d=u()[t+4>>2];t+=8;for(var M=0;M<d;M++){var g=k()[m+M],v=Wt[e];g===0||g===10?((e===1?Be:D)(Xe(v,0)),v.length=0):v.push(g)}s+=d}return u()[o>>2]=s,0}function ce(e){return e%4==0&&(e%100!=0||e%400==0)}function Te(e,t){for(var n=0,o=0;o<=t;n+=e[o++]);return n}var fe=[31,29,31,30,31,30,31,31,30,31,30,31],le=[31,28,31,30,31,30,31,31,30,31,30,31];function de(e,t){for(e=new Date(e.getTime());0<t;){var n=e.getMonth(),o=(ce(e.getFullYear())?fe:le)[n];if(!(t>o-e.getDate())){e.setDate(e.getDate()+t);break}t-=o-e.getDate()+1,e.setDate(1),n<11?e.setMonth(n+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return e}function Ht(e,t,n,o){function s(a,_,S){for(a=typeof a=="number"?a.toString():a||"";a.length<_;)a=S[0]+a;return a}function i(a,_){return s(a,_,"0")}function m(a,_){function S(Tt){return Tt<0?-1:0<Tt?1:0}var H;return H=(H=S(a.getFullYear()-_.getFullYear()))===0&&(H=S(a.getMonth()-_.getMonth()))===0?S(a.getDate()-_.getDate()):H}function d(a){switch(a.getDay()){case 0:return new Date(a.getFullYear()-1,11,29);case 1:return a;case 2:return new Date(a.getFullYear(),0,3);case 3:return new Date(a.getFullYear(),0,2);case 4:return new Date(a.getFullYear(),0,1);case 5:return new Date(a.getFullYear()-1,11,31);case 6:return new Date(a.getFullYear()-1,11,30)}}function M(a){a=de(new Date(a.$+1900,0,1),a.pa);var S=new Date(a.getFullYear()+1,0,4),_=d(new Date(a.getFullYear(),0,4)),S=d(S);return m(_,a)<=0?m(S,a)<=0?a.getFullYear()+1:a.getFullYear():a.getFullYear()-1}var g,j=u()[o+40>>2];for(g in o={Na:u()[o>>2],Ma:u()[o+4>>2],na:u()[o+8>>2],ia:u()[o+12>>2],ea:u()[o+16>>2],$:u()[o+20>>2],oa:u()[o+24>>2],pa:u()[o+28>>2],cb:u()[o+32>>2],La:u()[o+36>>2],Oa:j?z(j):""},n=z(n),j={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(g,"g"),j[g]);var v,F,w="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),I="January February March April May June July August September October November December".split(" "),j={"%a":function(a){return w[a.oa].substring(0,3)},"%A":function(a){return w[a.oa]},"%b":function(a){return I[a.ea].substring(0,3)},"%B":function(a){return I[a.ea]},"%C":function(a){return i((a.$+1900)/100|0,2)},"%d":function(a){return i(a.ia,2)},"%e":function(a){return s(a.ia,2," ")},"%g":function(a){return M(a).toString().substring(2)},"%G":M,"%H":function(a){return i(a.na,2)},"%I":function(a){return(a=a.na)==0?a=12:12<a&&(a-=12),i(a,2)},"%j":function(a){return i(a.ia+Te(ce(a.$+1900)?fe:le,a.ea-1),3)},"%m":function(a){return i(a.ea+1,2)},"%M":function(a){return i(a.Ma,2)},"%n":function(){return`
`},"%p":function(a){return 0<=a.na&&a.na<12?"AM":"PM"},"%S":function(a){return i(a.Na,2)},"%t":function(){return"	"},"%u":function(a){return a.oa||7},"%U":function(a){var _=new Date(a.$+1900,0,1),S=_.getDay()===0?_:de(_,7-_.getDay());return m(S,a=new Date(a.$+1900,a.ea,a.ia))<0?i(Math.ceil((31-S.getDate()+(Te(ce(a.getFullYear())?fe:le,a.getMonth()-1)-31)+a.getDate())/7),2):m(S,_)===0?"01":"00"},"%V":function(a){var S=new Date(a.$+1901,0,4),_=d(new Date(a.$+1900,0,4)),S=d(S),H=de(new Date(a.$+1900,0,1),a.pa);return m(H,_)<0?"53":m(S,H)<=0?"01":i(Math.ceil((_.getFullYear()<a.$+1900?a.pa+32-_.getDate():a.pa+1-_.getDate())/7),2)},"%w":function(a){return a.oa},"%W":function(a){var _=new Date(a.$,0,1),S=_.getDay()===1?_:de(_,_.getDay()===0?1:7-_.getDay()+1);return m(S,a=new Date(a.$+1900,a.ea,a.ia))<0?i(Math.ceil((31-S.getDate()+(Te(ce(a.getFullYear())?fe:le,a.getMonth()-1)-31)+a.getDate())/7),2):m(S,_)===0?"01":"00"},"%y":function(a){return(a.$+1900).toString().substring(2)},"%Y":function(a){return a.$+1900},"%z":function(a){var _=0<=(a=a.La);return a=Math.abs(a)/60,(_?"+":"-")+("0000"+(a/60*100+a%60)).slice(-4)},"%Z":function(a){return a.Oa},"%%":function(){return"%"}};for(g in n=n.replace(/%%/g,"\0\0"),j)n.includes(g)&&(n=n.replace(new RegExp(g,"g"),j[g](o)));return n=n.replace(/\0\0/g,"%"),v=n,F=Array(Me(v)+1),oe(v,F,0,F.length),(g=F).length>t?0:(Qe(g,e),g.length-1)}l.Ca();var me,Nt=[null,at,ut,ct,ft,lt,mt,ht,gt,_t,yt,wt,vt],Vt={p:function(e,t){bt(e,t)},l:function(e){St(e,!L,1,!be),l.xa()},i:function(e){y?postMessage({cmd:"cleanupThread",thread:e}):rt(e)},e:function(e,t,n,o){var s;return typeof SharedArrayBuffer>"u"?(D("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6):(s=[],y&&s.length===0?Mt(687865856,e,t,n,o):(e={Ka:n,qa:e,fa:o,Pa:s},y?(e.Qa="spawnThread",postMessage(e,s),0):ot(e)))},g:ut,v:ct,u:ft,w:lt,B:function(){return 2097152},m:function(e,t){if(e==t)postMessage({cmd:"processQueuedMainThreadWork"});else if(y)postMessage({targetThread:e,cmd:"processThreadQueue"});else{if(!(e=(e=l.aa[e])&&e.worker))return;e.postMessage({cmd:"processThreadQueue"})}return 1},b:function(){se("")},x:function(e,t){if(e===0)e=Date.now();else{if(e!==1&&e!==4)return u()[xt()>>2]=28,-1;e=it()}return u()[t>>2]=e/1e3|0,u()[t+4>>2]=e%1e3*1e6|0,0},h:function(){W||L||(xe=xe||{})["Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread"]||(xe["Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread"]=1,D("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread"))},c:it,A:function(e,t,n){k().copyWithin(e,t,t+n)},C:function(e,t,n){De.length=t,n>>=3;for(var o=0;o<t;o++)De[o]=f()[n+o];return(e<0?Pt[-e-1]:Nt[e]).apply(null,De)},z:function(e){var t=k().length;if(!((e>>>=0)<=t||2147483648<e))for(var n=1;n<=4;n*=2){var o=t*(1+.2/n),o=Math.min(o,e+100663296),s=Math;o=Math.max(e,o),s=s.min.call(s,2147483648,o+(65536-o%65536)%65536);e:{try{A.grow(s-C.byteLength+65535>>>16),V(A.buffer);var i=1;break e}catch{}i=void 0}if(i)return!0}return!1},j:function(e,t,n){return(Ie(e)?dt:mt)(e,t,n)},n:function(){throw"unwind"},k:function(e,t){t>>=2;var n=u()[t+6];return t={alpha:!!u()[t],depth:!!u()[t+1],stencil:!!u()[t+2],antialias:!!u()[t+3],premultipliedAlpha:!!u()[t+4],preserveDrawingBuffer:!!u()[t+5],powerPreference:Yt[n],failIfMajorPerformanceCaveat:!!u()[t+7],Ga:u()[t+8],Ya:u()[t+9],ua:u()[t+10],Aa:u()[t+11],$a:u()[t+12],ab:u()[t+13]},!(e=Ie(e))||t.Aa?0:Lt(e,t)},r:ht,s:gt,d:function(e){Rt(e)},f:_t,t:yt,o:wt,y:vt,a:A||r.wasmMemory,q:Ht},bt=(function(){function e(s,i){r.asm=s.exports,l.ma.push(r.asm.I),Je=r.asm.W,Ae.unshift(r.asm.D),Ue=i,y||(U--,r.monitorRunDependencies&&r.monitorRunDependencies(U),U==0&&(ke!==null&&(clearInterval(ke),ke=null),Q)&&(s=Q,Q=null,s()))}function t(s){e(s.instance,s.module)}function n(s){return(X||!be&&!L||typeof fetch!="function"?Promise.resolve().then(tt):fetch(P,{credentials:"same-origin"}).then(function(i){if(i.ok)return i.arrayBuffer();throw"failed to load wasm binary file at '"+P+"'"}).catch(tt)).then(function(i){return WebAssembly.instantiate(i,o)}).then(function(i){return i}).then(s,function(i){D("failed to asynchronously prepare wasm: "+i),se(i)})}var o={a:Vt};if(y||(U++,r.monitorRunDependencies&&r.monitorRunDependencies(U)),r.instantiateWasm)try{return r.instantiateWasm(o,e)}catch(s){return D("Module.instantiateWasm callback failed with error: "+s)}(X||typeof WebAssembly.instantiateStreaming!="function"||et()||typeof fetch!="function"?n(t):fetch(P,{credentials:"same-origin"}).then(function(s){return WebAssembly.instantiateStreaming(s,o).then(t,function(i){return D("wasm streaming compile failed: "+i),D("falling back to ArrayBuffer instantiation"),n(t)})})).catch(E)}(),r.___wasm_call_ctors=function(){return(r.___wasm_call_ctors=r.asm.D).apply(null,arguments)},r._main=function(){return(bt=r._main=r.asm.E).apply(null,arguments)}),xt=(r._command=function(){return(r._command=r.asm.F).apply(null,arguments)},r._isReady=function(){return(r._isReady=r.asm.G).apply(null,arguments)},r._free=function(){return(r._free=r.asm.H).apply(null,arguments)},r._emscripten_tls_init=function(){return(r._emscripten_tls_init=r.asm.I).apply(null,arguments)},r.___errno_location=function(){return(xt=r.___errno_location=r.asm.J).apply(null,arguments)}),St=(r.__emscripten_thread_crashed=function(){return(r.__emscripten_thread_crashed=r.asm.K).apply(null,arguments)},r._emscripten_proxy_main=function(){return(r._emscripten_proxy_main=r.asm.L).apply(null,arguments)},r.__emscripten_thread_init=function(){return(St=r.__emscripten_thread_init=r.asm.M).apply(null,arguments)}),Mt=(r._emscripten_current_thread_process_queued_calls=function(){return(r._emscripten_current_thread_process_queued_calls=r.asm.N).apply(null,arguments)},r._emscripten_sync_run_in_main_thread_4=function(){return(Mt=r._emscripten_sync_run_in_main_thread_4=r.asm.O).apply(null,arguments)}),At=r._emscripten_main_thread_process_queued_calls=function(){return(At=r._emscripten_main_thread_process_queued_calls=r.asm.P).apply(null,arguments)},kt=r._emscripten_run_in_main_runtime_thread_js=function(){return(kt=r._emscripten_run_in_main_runtime_thread_js=r.asm.Q).apply(null,arguments)},Et=r._emscripten_dispatch_to_thread_=function(){return(Et=r._emscripten_dispatch_to_thread_=r.asm.R).apply(null,arguments)},Ce=r.__emscripten_thread_free_data=function(){return(Ce=r.__emscripten_thread_free_data=r.asm.S).apply(null,arguments)},pe=(r.__emscripten_thread_exit=function(){return(r.__emscripten_thread_exit=r.asm.T).apply(null,arguments)},r._pthread_self=function(){return(pe=r._pthread_self=r.asm.U).apply(null,arguments)}),je=r._malloc=function(){return(je=r._malloc=r.asm.V).apply(null,arguments)},Dt=r._emscripten_stack_set_limits=function(){return(Dt=r._emscripten_stack_set_limits=r.asm.X).apply(null,arguments)},qe=r.stackSave=function(){return(qe=r.stackSave=r.asm.Y).apply(null,arguments)},he=r.stackRestore=function(){return(he=r.stackRestore=r.asm.Z).apply(null,arguments)},Y=r.stackAlloc=function(){return(Y=r.stackAlloc=r.asm._).apply(null,arguments)},It=r.__emscripten_allow_main_runtime_queued_calls=68944976;function K(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function Fe(e){function t(){if(!me&&(me=!0,r.calledRun=!0,!Se)){if(y||J(Ae),y||J(qt),q(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),Ot){var o=e,s=r._emscripten_proxy_main,i=(o=o||[]).length+1,m=Y(4*(i+1));u()[m>>2]=ze(ne);for(var d=1;d<i;d++)u()[(m>>2)+d]=ze(o[d-1]);u()[(m>>2)+i]=0,s(i,m)}if(!y){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)o=r.postRun.shift(),Ze.unshift(o);J(Ze)}}}if(e=e||ve,!(0<U))if(y)q(r),y||J(Ae),postMessage({cmd:"loaded"});else{if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)n=void 0,n=r.preRun.shift(),Ke.unshift(n);J(Ke),0<U||(r.setStatus?(r.setStatus("Running..."),setTimeout(function(){setTimeout(function(){r.setStatus("")},1),t()},1)):t())}var n}function Rt(e){if(y)throw at(e),"unwind";ie()||y||l.ra(),ie()||(l.ra(),r.onExit&&r.onExit(e),Se=!0),re(e,new K(e))}if(r.ccall=function(e,t,n,o){var s={string:function(g){var v,F,w=0;return g!=null&&g!==0&&(v=1+(g.length<<2),F=w=Y(v),oe(g,k(),F,v)),w},array:function(g){var v=Y(g.length);return Qe(g,v),v}},i=(e=r["_"+e],[]),m=0;if(o)for(var d=0;d<o.length;d++){var M=s[n[d]];M?(m===0&&(m=qe()),i[d]=M(o[d])):i[d]=o[d]}return n=e.apply(null,i),e=n,m!==0&&he(m),t==="string"?z(e):t==="boolean"?!!e:e},r.keepRuntimeAlive=ie,r.PThread=l,r.PThread=l,r.wasmMemory=A,r.ExitStatus=K,Q=function e(){me||Fe(),me||(Q=e)},r.run=Fe,r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);0<r.preInit.length;)r.preInit.pop()();var Ot=!0;return r.noInitialRun&&(Ot=!1),Fe(),x.ready}var h;return h=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0,typeof __filename<"u"&&(h=h||__filename),typeof exports=="object"&&typeof module=="object"?module.exports=p:typeof define=="function"&&define.amd?define([],function(){return p}):typeof exports=="object"&&(exports.Stockfish=p),p}function Ct(p){var h,x=0,c=[],k=R.slice(1+(R.lastIndexOf(".")-1>>>0)),u=R.slice(0,-k.length);for(h=0;h<p;++h)(function(f,r){fetch(new Request(f)).then(function(q){return q.blob()}).then(function(q){r(q)})})(u+"-part-"+h+k,function(f){return function(r){++x,c[f]=r,x===p&&(r=URL.createObjectURL(new Blob(c)),ge(r))}}(h))}typeof self<"u"&&self.location.hash.split(",")[1]==="worker"||typeof global<"u"&&Object.prototype.toString.call(global.process)==="[object process]"&&!require("worker_threads").isMainThread?function(){"use strict";var p,h,x,c={},k=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";k&&(p=require("worker_threads"),(h=p.parentPort).on("message",function(f){onmessage({data:f})}),x=require("fs"),Object.assign(global,{self:global,require,Module:c,location:{href:__filename},Worker:p.Worker,importScripts:function(f){(0,eval)(x.readFileSync(f,"utf8"))},postMessage:function(f){h.postMessage(f)},performance:global.performance||{now:function(){return Date.now()}}}));var u=function(){var f=Array.prototype.slice.call(arguments).join(" ");k?x.writeSync(2,f+`
`):console.error(f)};self.alert=function(){var f=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:f,threadId:c._pthread_self()})},c.instantiateWasm=(f,r)=>(f=new WebAssembly.Instance(c.wasmModule,f),r(f),c.wasmModule=null,f.exports),self.onmessage=f=>{try{var r;if(f.data.cmd==="load")c.wasmModule=f.data.wasmModule,c.wasmMemory=f.data.wasmMemory,c.buffer=c.wasmMemory.buffer,c.ENVIRONMENT_IS_PTHREAD=!0,typeof f.data.urlOrBlob=="string"?importScripts(f.data.urlOrBlob):(r=URL.createObjectURL(f.data.urlOrBlob),importScripts(r),URL.revokeObjectURL(r)),G(c).then(function(E){c=E});else if(f.data.cmd==="run"){c.__performance_now_clock_drift=performance.now()-f.data.time,c.__emscripten_thread_init(f.data.threadInfoStruct,0,0,1),c.establishStackSpace(),c.PThread.receiveObjectTransfer(f.data),c.PThread.threadInit();try{var q=c.invokeEntryPoint(f.data.start_routine,f.data.arg);c.keepRuntimeAlive()?c.PThread.setExitStatus(q):c.__emscripten_thread_exit(q)}catch(E){if(E!="unwind"){if(!(E instanceof c.ExitStatus))throw E;c.keepRuntimeAlive()||c.__emscripten_thread_exit(E.status)}}}else f.data.cmd==="cancel"?c._pthread_self()&&c.__emscripten_thread_exit(-1):f.data.target!=="setimmediate"&&(f.data.cmd==="processThreadQueue"?c._pthread_self()&&c._emscripten_current_thread_process_queued_calls():f.data.cmd==="processProxyingQueue"?c._pthread_self()&&c._emscripten_proxy_execute_queue(f.data.queue):(u("worker.js received unknown command "+f.data.cmd),u(f.data)))}catch(E){throw u("worker.js onmessage() captured an uncaught exception: "+E),E&&E.stack&&u(E.stack),c.__emscripten_thread_crashed&&c.__emscripten_thread_crashed(),E}},self._origOnmessage=self.onmessage,self.onmessage=function(f){f.data.cmd==="load"?(c.wasmModule=f.data.wasmModule,c.wasmMemory=f.data.wasmMemory,c.buffer=c.wasmMemory.buffer,c.ENVIRONMENT_IS_PTHREAD=!0,f.data.workerID&&(c.workerID=f.data.workerID),f.data.wasmSourceMap&&(c.wasmSourceMapData=f.data.wasmSourceMap),f.data.wasmOffsetConverter&&(c.wasmOffsetData=f.data.wasmOffsetConverter),(G=N())(c).then(function(r){c=r})):self._origOnmessage(f)}}():typeof onmessage<"u"&&(typeof window>"u"||window.document===void 0)||typeof global<"u"&&Object.prototype.toString.call(global.process)==="[object process]"?(Z=typeof global<"u"&&Object.prototype.toString.call(global.process)==="[object process]",b={},B=[],Z?require.main===module?($=require("path"),R=$.join(__dirname,$.basename(__filename,$.extname(__filename))+".wasm"),b={locateFile:function(p){return-1<p.indexOf(".wasm")?-1<p.indexOf(".wasm.map")?R+".map":R:__filename},listener:function(p){process.stdout.write(p+`
`)}},typeof enginePartsCount=="number"&&(b.wasmBinary=function(p){for(var h=require("fs"),x=$.extname(R),c=R.slice(0,-x.length),k=[],u=0;u<p;++u)k.push(h.readFileSync(c+"-part-"+u+".wasm"));return Buffer.concat(k)}(enginePartsCount)),(G=N())(b).then(function p(){if(b._isReady){if(!b._isReady())return setTimeout(p,10);delete b._isReady}b.sendCommand=function(h){b.ccall("command",null,["string"],[h],{async:typeof IS_ASYNCIFY<"u"&&/^go\b/.test(h)})},B.forEach(b.sendCommand),B=null}),require("readline").createInterface({input:process.stdin,output:process.stdout,completer:function(p){var h=["binc ","btime ","confidence ","depth ","infinite ","mate ","maxdepth ","maxtime ","mindepth ","mintime ","moves ","movestogo ","movetime ","ponder ","searchmoves ","shallow ","winc ","wtime "];function x(k){return k.indexOf(p)===0}var c=["compiler","d","eval","exit","flip","go ","isready ","ponderhit ","position fen ","position startpos","position startpos moves","quit","setoption name Clear Hash value true","setoption name Contempt value ","setoption name Hash value ","setoption name Minimum Thinking Time value ","setoption name Move Overhead value ","setoption name MultiPV value ","setoption name Ponder value ","setoption name Skill Level value ","setoption name Slow Mover value ","setoption name Threads value ","setoption name UCI_Chess960 value false","setoption name UCI_Chess960 value true","setoption name UCI_LimitStrength value true","setoption name UCI_LimitStrength value false","setoption name UCI_Elo value ","setoption name UCI_ShowWDL value true","setoption name UCI_ShowWDL value false","setoption name nodestime value ","stop","uci","ucinewgame"].filter(x);return[c=c.length?c:(p=p.replace(/^.*\s/,""))?h.filter(x):h,p]},historySize:100}).on("line",function(p){p&&(b.sendCommand?b.sendCommand(p):B.push(p),p!=="quit"&&p!=="exit"||process.exit())}).on("close",function(){process.exit()}).setPrompt("")):module.exports=N:(Z=self.location.hash.substr(1).split(","),R=decodeURIComponent(Z[0]||location.origin+location.pathname.replace(/\.js$/i,".wasm")),ge=function(p){b={locateFile:function(h){return-1<h.indexOf(".wasm")?-1<h.indexOf(".wasm.map")?R+".map":p||R:self.location.origin+self.location.pathname+"#"+R+",worker"},listener:function(h){postMessage(h)}},(G=N())(b).then(function h(){if(b._isReady){if(!b._isReady())return setTimeout(h,10);delete b._isReady}b.sendCommand=function(x){if(b.ccall("command",null,["string"],[x],{async:typeof IS_ASYNCIFY<"u"&&/^go\b/.test(x)}),x==="quit"||x==="exit")try{b.terminate()}catch{}},B.forEach(b.sendCommand),B=null}).catch(function(h){setTimeout(function(){throw h},1)})},typeof enginePartsCount=="number"?Ct(enginePartsCount):ge(),onmessage=onmessage||function(p){if(b.sendCommand?b.sendCommand(p.data):B.push(p.data),p.data==="quit"||p.data==="exit")try{self.close()}catch{}})):typeof document=="object"&&document.currentScript?document.currentScript._exports=N():G=N()})();
